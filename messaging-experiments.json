[
  {
    "id": "CFR_XMAN_SMOKE_TEST",
    "enabled": true,
    "targeting": "localeLanguageCode == 'en' && firefoxVersion >= 77 && [userId, 'cfr_xman_smoke_test']|bucketSample(0, 2000, 10000)",
    "filter_expression": "env.channel == 'nightly'",
    "arguments": {
      "slug": "cfr_xman_smoke_test",
      "userFacingName": "CFR X-Man smoke test",
      "userFacingDescription": "Test X-Man ability to deploy CFR experiments",
      "isEnrollmentPaused": false,
      "branches": [
        {
          "slug": "control",
          "ratio": 1,
          "groups": [
            "cfr"
          ],
          "value": {
            "id": "FACEBOOK_CONTAINER_3_72",
            "content": {
              "addon": {
                "amo_url": "https://addons.mozilla.org/firefox/addon/facebook-container/",
                "author": "Mozilla",
                "icon": "resource://activity-stream/data/content/assets/cfr_fb_container.png",
                "id": "954390",
                "rating": 4.5,
                "title": "Facebook Container",
                "users": 1455872
              },
              "bucket_id": "CFR_M1",
              "buttons": {
                "primary": {
                  "action": {
                    "data": {
                      "url": null
                    },
                    "type": "INSTALL_ADDON_FROM_URL"
                  },
                  "label": {
                    "string_id": "cfr-doorhanger-extension-ok-button"
                  },
                  "secondary": [
                    {
                      "action": {
                        "type": "CANCEL"
                      },
                      "label": {
                        "string_id": "cfr-doorhanger-extension-cancel-button"
                      }
                    },
                    {
                      "label": {
                        "string_id": "cfr-doorhanger-extension-never-show-recommendation"
                      }
                    },
                    {
                      "action": {
                        "data": {
                          "category": "general-cfraddons",
                          "origin": "CFR"
                        },
                        "type": "OPEN_PREFERENCES_PAGE"
                      },
                      "label": {
                        "string_id": "cfr-doorhanger-extension-manage-settings-button"
                      }
                    }
                  ]
                },
                "category": "cfrAddons",
                "heading_text": {
                  "string_id": "cfr-doorhanger-extension-heading"
                },
                "info_icon": {
                  "label": {
                    "string_id": "cfr-doorhanger-extension-sumo-link"
                  },
                  "sumo_path": "extensionrecommendations"
                },
                "notification_text": {
                  "string_id": "cfr-doorhanger-extension-notification2"
                },
                "text": "Stop Facebook from tracking your activity across the web. Use Facebook the way you normally do without annoying ads following you around."
              },
              "frequency": {
                "lifetime": 3
              },
              "targeting": "localeLanguageCode == 'en' &&  (xpinstallEnabled == true) && (['@contain-facebook','{bb1b80be-e6b3-40a1-9b6e-9d4073343f0b}', '{a50d61ca-d27b-437a-8b52-5fd801a0a88b}'] intersect addonsInfo.addons|keys)|length == 0 && (['www.facebook.com','facebook.com','messenger.com','www.messenger.com', 'instagram.com','www.instagram.com','whatsapp.com','www.whatsapp.com','web.whatsapp.com'] intersect topFrecentSites[.frecency >= 5000]|mapToProperty('host'))|length > 0 && userPrefs.cfrAddons",
              "priority": 5,
              "template": "cfr_doorhanger",
              "trigger": {
                "id": "openURL",
                "params": [
                  "www.facebook.com",
                  "facebook.com",
                  "www.instagram.com",
                  "instagram.com",
                  "www.whatsapp.com",
                  "whatsapp.com",
                  "web.whatsapp.com",
                  "www.messenger.com",
                  "messenger.com"
                ]
              }
            }
          }
        },
        {
          "slug": "variant_1",
          "ratio": 1,
          "groups": [
            "cfr"
          ],
          "value": {
            "id": "FACEBOOK_CONTAINER_3_72",
            "content": {
              "addon": {
                "amo_url": "https://addons.mozilla.org/firefox/addon/facebook-container/",
                "author": "Mozilla",
                "icon": "resource://activity-stream/data/content/assets/cfr_fb_container.png",
                "id": "954390",
                "rating": 4.5,
                "title": "Facebook Container",
                "users": 1455872
              },
              "bucket_id": "CFR_M1",
              "buttons": {
                "primary": {
                  "action": {
                    "data": {
                      "url": null
                    },
                    "type": "INSTALL_ADDON_FROM_URL"
                  },
                  "label": {
                    "string_id": "cfr-doorhanger-extension-ok-button"
                  },
                  "secondary": [
                    {
                      "action": {
                        "type": "CANCEL"
                      },
                      "label": {
                        "string_id": "cfr-doorhanger-extension-cancel-button"
                      }
                    },
                    {
                      "label": {
                        "string_id": "cfr-doorhanger-extension-never-show-recommendation"
                      }
                    },
                    {
                      "action": {
                        "data": {
                          "category": "general-cfraddons",
                          "origin": "CFR"
                        },
                        "type": "OPEN_PREFERENCES_PAGE"
                      },
                      "label": {
                        "string_id": "cfr-doorhanger-extension-manage-settings-button"
                      }
                    }
                  ]
                },
                "category": "cfrAddons",
                "heading_text": {
                  "string_id": "cfr-doorhanger-extension-heading"
                },
                "info_icon": {
                  "label": {
                    "string_id": "cfr-doorhanger-extension-sumo-link"
                  },
                  "sumo_path": "extensionrecommendations"
                },
                "notification_text": {
                  "string_id": "cfr-doorhanger-extension-notification2"
                },
                "text": "Stop Facebook from tracking your activity across the web. Use Facebook the way you normally do without annoying ads following you around."
              },
              "frequency": {
                "lifetime": 3
              },
              "targeting": "localeLanguageCode == 'en' &&  (xpinstallEnabled == true) && (['@contain-facebook','{bb1b80be-e6b3-40a1-9b6e-9d4073343f0b}', '{a50d61ca-d27b-437a-8b52-5fd801a0a88b}'] intersect addonsInfo.addons|keys)|length == 0 && (['www.facebook.com','facebook.com','messenger.com','www.messenger.com', 'instagram.com','www.instagram.com','whatsapp.com','www.whatsapp.com','web.whatsapp.com'] intersect topFrecentSites[.frecency >= 5000]|mapToProperty('host'))|length > 0 && userPrefs.cfrAddons",
              "priority": 5,
              "template": "cfr_doorhanger",
              "trigger": {
                "id": "openURL",
                "params": [
                  "www.facebook.com",
                  "facebook.com",
                  "www.instagram.com",
                  "instagram.com",
                  "www.whatsapp.com",
                  "whatsapp.com",
                  "web.whatsapp.com",
                  "www.messenger.com",
                  "messenger.com"
                ]
              }
            }
          }
        }
      ]
    }
  },
  {
    "id": "RECOMMEND_PICTURE_IN_PICTURE_CFR",
    "enabled": true,
    "arguments": {
      "slug": "bug-1635199-message-recommend-picture-in-picture-cfr-beta-77-77",
      "branches": [
        {
          "slug": "n4s_pip_control",
          "ratio": 50,
          "value": {},
          "groups": [
            "cfr"
          ]
        },
        {
          "slug": "n4s_pip_cfr",
          "ratio": 50,
          "groups": [
            "cfr"
          ],
          "value": {
            "id": "N4S_PIP_CFR_MESSSAGE",
            "content": {
              "bucket_id": "N4S_PIP_CFR_MESSSAGE",
              "buttons": {
                "primary": {
                  "action": {
                    "data": {
                      "args": "https://support.mozilla.org/kb/about-picture-picture-firefox",
                      "where": "tabshifted"
                    },
                    "type": "OPEN_URL"
                  },
                  "label": {
                    "value": "Learn More",
                    "attributes": {
                      "accesskey": "L"
                    }
                  }
                },
                "secondary": [
                  {
                    "action": {
                      "type": "CANCEL"
                    },
                    "label": {
                      "string_id": "cfr-doorhanger-extension-cancel-button"
                    }
                  },
                  {
                    "label": {
                      "string_id": "cfr-doorhanger-extension-never-show-recommendation"
                    }
                  },
                  {
                    "action": {
                      "data": {
                        "category": "general-cfrfeatures"
                      },
                      "type": "OPEN_PREFERENCES_PAGE"
                    },
                    "label": {
                      "string_id": "cfr-doorhanger-extension-manage-settings-button"
                    }
                  }
                ]
              },
              "category": "cfrFeatures",
              "heading_text": "Multitask with Picture-in-Picture",
              "icon": "chrome://global/skin/media/pictureinpicture.svg",
              "info_icon": {
                "label": {
                  "string_id": "cfr-doorhanger-extension-sumo-link"
                },
                "sumo_path": "extensionrecommendations"
              },
              "layout": "icon_and_message",
              "notification_text": {
                "string_id": "cfr-doorhanger-extension-notification"
              },
              "text": "Pop video into a floating window to keep watching while you work in other tabs. Hover over any video and select the small blue rectangle that appears."
            },
            "frequency": {
              "lifetime": 3
            },
            "targeting": "true",
            "template": "cfr_doorhanger",
            "trigger": {
              "id": "openURL",
              "params": [
                "youtube.com",
                "netflix.com",
                "vimeo.com",
                "twitch.tv",
                "dailymotion.com",
                "hulu.com",
                "ustream.com",
                "metacafe.com",
                "disneyplus.com",
                "www.youtube.com",
                "www.netflix.com",
                "www.vimeo.com",
                "www.twitch.tv",
                "www.dailymotion.com",
                "www.hulu.com",
                "www.ustream.com",
                "www.metacafe.com",
                "www.disneyplus.com"
              ]
            }
          }
        }
      ],
      "isHighVolume": false,
      "userFacingName": "Recommend Picture-in-Picture CFR",
      "isEnrollmentPaused": false,
      "experimentDocumentUrl": "https://experimenter.services.mozilla.com/experiments/recommend-picture-in-picture-cfr/",
      "userFacingDescription": "If we introduce PiP via CFR for users visiting video sites frequently, then we will see more adoption of the PiP feature because we have observed the feature is not easily discovered via user research observations."
    },
    "filter_expression": "env.version >= '77.' && env.version < '78.'",
    "targeting": "locale == 'en-US' && userPrefs.cfrFeatures && firefoxVersion == 77 &&\nbrowserSettings.update.channel == 'beta' &&\n'media.videocontrols.picture-in-picture.video-toggle.enabled'|preferenceValue &&\n[userId, 'n4s-workweek']|bucketSample(0, 500, 10000)\n"
  }
]